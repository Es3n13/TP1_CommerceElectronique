@page
@model BoutiqueElegance.Pages.IndexModel

@{
    ViewData["Title"] = "Accueil";
}

<section class="filter-bar">
    <form method="get" class="filter-form">
        <input type="text"
               name="Search"
               value="@Model.Search"
               placeholder="Rechercher un restaurant..."
               class="search-input" />

        <select name="SelectedTag" class="tag-select">
            <option value="">Toutes les cuisines</option>
            @foreach (var tag in Model.AllTags)
            {
                <option value="@tag.Name" selected="@(tag.Name == Model.SelectedTag ? "selected" : null)">
                    @tag.Name
                </option>
            }
        </select>

        <button type="submit" class="filter-button">Filtrer</button>
    </form>
</section>

<section>
    <h2>Restaurants populaires</h2>

    @if (!Model.Restaurants.Any())
    {
        <p>Aucun restaurant trouvé pour ces critères.</p>
    }
    else
    {
        <div class="products">
            @foreach (var restaurant in Model.Restaurants)
            {
                <div class="product-card">
                    <img src="@restaurant.ImageUrl" alt="@restaurant.Name" />
                    <h3>@restaurant.Name</h3>
                    <p>@restaurant.Description</p>

                    <p class="tags">
                        Cuisine :
                        @string.Join(", ", restaurant.RestaurantTags.Select(rt => rt.Tag.Name))
                    </p>

                    <button onclick="location.href='@Url.Page("/Restaurants/Details", new { id = restaurant.Id })'">
                        Voir le menu
                    </button>
                </div>
            }
        </div>
    }
</section>
