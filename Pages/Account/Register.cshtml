@page
@model BoutiqueElegance.Pages.Account.RegisterModel
@{
    ViewData["Title"] = "Inscription";
}

<h2>Inscription</h2>

<form method="post">
    <div>
        <label>Nom complet</label>
        <input asp-for="FullName" />
    </div>
    <div>
        <label>Courriel</label>
        <input asp-for="Email" type="email" />
    </div>
    <div>
        <label>Mot de passe</label>
        <input asp-for="Password" type="password" />
    </div>
    <div>
        <label>Rôle</label>
        <select asp-for="Role" id="role-select">
            <option value="Client">Client</option>
            <option value="Vendeur">Vendeur</option>
        </select>
    </div>

    <div id="restaurant-select-container" style="display:none;">
        <label>Restaurant associé</label>
        <select asp-for="SelectedRestaurantId">
            <option value="">-- Choisissez un restaurant --</option>
            @foreach (var r in Model.Restaurants)
            {
                <option value="@r.Id">@r.Name</option>
            }
        </select>
    </div>

    <button type="submit">Créer le compte</button>

    <div asp-validation-summary="All"></div>
</form>

@section Scripts {
    <script>
        const roleSelect = document.getElementById('role-select');
        const restaurantContainer = document.getElementById('restaurant-select-container');

        function toggleRestaurantSelect() {
            if (roleSelect.value === 'Vendeur') {
                restaurantContainer.style.display = 'block';
            } else {
                restaurantContainer.style.display = 'none';
            }
        }

        roleSelect.addEventListener('change', toggleRestaurantSelect);
        // appel initial au chargement
        toggleRestaurantSelect();
    </script>
}

